shadow$provide.module$node_modules$dragselect$dist$DragSelect=function(global$jscomp$0,require,module,exports){(function(global,factory){"object"===typeof exports&&"undefined"!==typeof module?module.exports=factory():"function"===typeof define&&define.amd?define(factory):(global="undefined"!==typeof globalThis?globalThis:global||self,global.DragSelect=factory())})(this,function(){function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);
enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread2(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,
key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function");}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1;descriptor.configurable=!0;"value"in descriptor&&(descriptor.writable=!0);Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor)}}function _createClass(Constructor,
protoProps,staticProps){protoProps&&_defineProperties(Constructor.prototype,protoProps);staticProps&&_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:!1});return Constructor}function _defineProperty(obj,key,value){key=_toPropertyKey(key);key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value;return obj}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");
subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}});Object.defineProperty(subClass,"prototype",{writable:!1});superClass&&_setPrototypeOf(subClass,superClass)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _setPrototypeOf(o$jscomp$0,p){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():
function(o,p){o.__proto__=p;return o};return _setPrototypeOf(o$jscomp$0,p)}function _isNativeReflectConstruct(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function _construct(Parent,args,Class){_construct=_isNativeReflectConstruct()?Reflect.construct.bind():function(Parent,args,Class){var a=[null];a.push.apply(a,
args);Parent=new (Function.bind.apply(Parent,a));Class&&_setPrototypeOf(Parent,Class.prototype);return Parent};return _construct.apply(null,arguments)}function _wrapNativeSuper(Class$jscomp$0){var _cache="function"===typeof Map?new Map:void 0;_wrapNativeSuper=function(Class){function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor)}if(null===Class||-1===Function.toString.call(Class).indexOf("[native code]"))return Class;if("function"!==typeof Class)throw new TypeError("Super expression must either be null or a function");
if("undefined"!==typeof _cache){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}});return _setPrototypeOf(Wrapper,Class)};return _wrapNativeSuper(Class$jscomp$0)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _createSuper(Derived){var hasNativeReflectConstruct=
_isNativeReflectConstruct();return function(){var Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;Super=Reflect.construct(Super,arguments,NewTarget)}else Super=Super.apply(this,arguments);if(!Super||"object"!==typeof Super&&"function"!==typeof Super){if(void 0!==Super)throw new TypeError("Derived constructors may only return object or undefined");Super=_assertThisInitialized(this)}return Super}}function _get(){_get="undefined"!==typeof Reflect&&
Reflect.get?Reflect.get.bind():function(target,property,receiver){var base;for(base=target;!Object.prototype.hasOwnProperty.call(base,property)&&(base=_getPrototypeOf(base),null!==base););if(base)return base=Object.getOwnPropertyDescriptor(base,property),base.get?base.get.call(3>arguments.length?target:receiver):base.value};return _get.apply(this,arguments)}function _slicedToArray(arr,i){var JSCompiler_temp=Array.isArray(arr)?arr:void 0;if(!JSCompiler_temp)a:{var _i=null==arr?null:"undefined"!=typeof Symbol&&
arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i){JSCompiler_temp=void 0;break a}_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0;var _e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r)){JSCompiler_temp=void 0;break a}}finally{if(_d)throw _e;}}JSCompiler_temp=_arr}else JSCompiler_temp=void 0}if(!(arr=JSCompiler_temp||_unsupportedIterableToArray(arr,
i)))throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");return arr}function _toConsumableArray(arr){var JSCompiler_inline_result=Array.isArray(arr)?_arrayLikeToArray(arr):void 0;JSCompiler_inline_result||(JSCompiler_inline_result="undefined"!==typeof Symbol&&null!=arr[Symbol.iterator]||null!=arr["@@iterator"]?Array.from(arr):void 0);if(!(arr=JSCompiler_inline_result||_unsupportedIterableToArray(arr)))throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
return arr}function _unsupportedIterableToArray(o,minLen){if(o){if("string"===typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}}function _arrayLikeToArray(arr,len){if(null==len||len>arr.length)len=arr.length;for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=
arr[i];return arr2}function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!==typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"===typeof o.length){it&&(o=it);var i=0;allowArrayLike=function(){};return{s:allowArrayLike,n:function(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function(e){throw e;},f:allowArrayLike}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}var normalCompletion=!0,didErr=!1,err;return{s:function(){it=it.call(o)},n:function(){var step=it.next();normalCompletion=step.done;return step},e:function(e){didErr=!0;err=e},f:function(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err;}}}}function _toPropertyKey(arg){a:if("object"===typeof arg&&null!==arg){var prim=arg[Symbol.toPrimitive];if(void 0!==prim){arg=prim.call(arg,"string");if("object"!==typeof arg)break a;throw new TypeError("@@toPrimitive must return a primitive value.");
}arg=String(arg)}return"symbol"===typeof arg?arg:String(arg)}var calc=function(_ref,operator,_ref2){var x1=_ref.x;_ref=_ref.y;var x2=_ref2.x;_ref2=_ref2.y;return{"+":{x:x1+x2,y:_ref+_ref2},"-":{x:x1-x2,y:_ref-_ref2},"*":{x:x1*x2,y:_ref*_ref2},"/":{x:x1/x2,y:_ref/_ref2}}[operator]},rect2vect=function(rect){return{x:rect.left,y:rect.top}},vect2rect=function(vect){var dimension=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return{left:vect.x,top:vect.y,right:vect.x,bottom:vect.y,width:dimension,
height:dimension}},addModificationObservers=function(nodes,cb){window.addEventListener("resize",cb);window.addEventListener("scroll",cb);var observer=new MutationObserver(cb);nodes.forEach(function(el,i){observer.observe(el,{childList:0!==i,attributes:!0})});return{observer:observer,callback:cb,cleanup:function(){window.removeEventListener("resize",cb);window.removeEventListener("scroll",cb);observer.disconnect()}}},createSelectorAreaElement=function(){var node=document.createElement("div");node.style.position=
"fixed";node.style.overflow="hidden";node.style.pointerEvents="none";node.style.zIndex="999999999999999999";return node},debounce=function(func,wait){var timeout;return function(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];clearTimeout(timeout);timeout=setTimeout(function(){timeout=null;func.apply(void 0,args)},wait)}},documentScroll=function(){var _document$body,_document$documentEle,_document$body2,_document$documentEle2;return{y:(null===(_document$body=
document.body)||void 0===_document$body?void 0:_document$body.scrollTop)||(null===(_document$documentEle=document.documentElement)||void 0===_document$documentEle?void 0:_document$documentEle.scrollTop)||0,x:(null===(_document$body2=document.body)||void 0===_document$body2?void 0:_document$body2.scrollLeft)||(null===(_document$documentEle2=document.documentElement)||void 0===_document$documentEle2?void 0:_document$documentEle2.scrollLeft)||0}},getAllParentNodes=function(node){return function traverse(toWatch){var _toWatch$index,
index=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,parent=null===(_toWatch$index=toWatch[index])||void 0===_toWatch$index?void 0:_toWatch$index.parentNode;return parent?(toWatch.push(parent),index++,traverse(toWatch,index)):toWatch}([node])},getBoundingClientRect=function(elements,SelectableSet){var rect={top:Number.POSITIVE_INFINITY,left:Number.POSITIVE_INFINITY,bottom:Number.NEGATIVE_INFINITY,right:Number.NEGATIVE_INFINITY,width:Number.NEGATIVE_INFINITY,height:Number.NEGATIVE_INFINITY};
toArray(elements).forEach(function(element){element=SelectableSet.getRect(element);rect.top=Math.min(rect.top,element.top);rect.left=Math.min(rect.left,element.left);rect.bottom=Math.max(rect.bottom,element.bottom);rect.right=Math.max(rect.right,element.right)});rect.height=rect.bottom-rect.top;rect.width=rect.right-rect.left;return rect},getCurrentScroll=function(area){return!area||area instanceof Document?documentScroll():{x:0<=area.scrollLeft?area.scrollLeft:documentScroll().x,y:0<=area.scrollTop?
area.scrollTop:documentScroll().y}},handleElementPositionAttribute=function(_ref){var node=_ref.node;_ref=_ref.computedStyle.position;node instanceof Document||"absolute"===_ref||"relative"===_ref||"fixed"===_ref||(node.style.position="relative")},handleKeyboardDragPosDifference=function(_ref){var shiftKey=_ref.shiftKey,keyboardDragSpeed=_ref.keyboardDragSpeed,zoom=_ref.zoom,key=_ref.key,dragKeys=_ref.dragKeys,scrollDiff=_ref.scrollDiff,canScroll=_ref.canScroll;_ref=_ref.scrollCallback;var posDirection=
{x:0,y:0};zoom=shiftKey?4*keyboardDragSpeed*zoom:keyboardDragSpeed*zoom;dragKeys.left.includes(key)&&(posDirection.x=scrollDiff.x||-zoom,shiftKey||scrollDiff.x||!canScroll||_ref(["left"],keyboardDragSpeed));dragKeys.right.includes(key)&&(posDirection.x=scrollDiff.x||zoom,shiftKey||scrollDiff.x||!canScroll||_ref(["right"],keyboardDragSpeed));dragKeys.up.includes(key)&&(posDirection.y=scrollDiff.y||-zoom,shiftKey||scrollDiff.y||!canScroll||_ref(["top"],keyboardDragSpeed));dragKeys.down.includes(key)&&
(posDirection.y=scrollDiff.y||zoom,shiftKey||scrollDiff.y||!canScroll||_ref(["bottom"],keyboardDragSpeed));return posDirection},wrongTypeWarn=function(key,type,fallback){return console.warn('[DragSelect] TypeIssue: setting "'.concat(key,'" is not of type "').concat(type,'".'))},hydrateHelper=function(key,value,withFallback,fallback){if(void 0===value)return withFallback?_defineProperty({},key,fallback):{};if(null===value)return _defineProperty({},key,null);var isAvailable=!0,forceFallback=!1,expectedString=
"string"===typeof fallback;expectedString&&(isAvailable="string"===typeof value||value instanceof String);expectedString&&!isAvailable&&(forceFallback=!0,wrongTypeWarn(key,"string"));(expectedString=!Number.isNaN(fallback)&&"number"===typeof fallback)&&(isAvailable=!Number.isNaN(value)&&"number"===typeof value);expectedString&&!isAvailable&&(forceFallback=!0,wrongTypeWarn(key,"number"));(expectedString="[object Object]"===Object.prototype.toString.call(fallback))&&(isAvailable="[object Object]"===
Object.prototype.toString.call(value));expectedString&&!isAvailable&&(forceFallback=!0,wrongTypeWarn(key,"object"));(expectedString="boolean"===typeof fallback)&&(isAvailable="boolean"===typeof value);expectedString&&!isAvailable&&(forceFallback=!0,wrongTypeWarn(key,"boolean"));(expectedString=Array.isArray(fallback))&&(isAvailable=Array.isArray(value));expectedString&&!isAvailable&&(forceFallback=!0,wrongTypeWarn(key,"array"));withFallback=forceFallback||withFallback;if("dragKeys"===key&&isAvailable)return _defineProperty({},
key,Object.assign(fallback,value));if("dragKeys"===key&&!isAvailable)return withFallback?_defineProperty({},key,fallback):{};"dropZones"===key&&isAvailable&&(new Set(value.map(function(v){return v.id}))).size!==value.length&&console.warn('[DragSelect] UniqueConstraintsIssue: setting "dropZones" contains duplicate ids.');return isAvailable?_defineProperty({},key,value):withFallback?_defineProperty({},key,fallback):{}},hydrateSettings=function(settings,withFallback){return _objectSpread2(_objectSpread2(_objectSpread2(_objectSpread2(_objectSpread2(_objectSpread2(_objectSpread2(_objectSpread2(_objectSpread2(_objectSpread2(_objectSpread2(_objectSpread2(_objectSpread2(_objectSpread2(_objectSpread2(_objectSpread2(_objectSpread2(_objectSpread2(_objectSpread2(_objectSpread2(_objectSpread2(_objectSpread2(_objectSpread2(_objectSpread2(_objectSpread2(_objectSpread2(_objectSpread2(_objectSpread2(_objectSpread2(_objectSpread2(_objectSpread2(_objectSpread2(_objectSpread2(_objectSpread2(_objectSpread2({},
hydrateHelper("area",settings.area,withFallback,document)),hydrateHelper("selectables",settings.selectables,withFallback,null)),hydrateHelper("autoScrollSpeed",settings.autoScrollSpeed,withFallback,5)),hydrateHelper("overflowTolerance",settings.overflowTolerance,withFallback,{x:25,y:25})),hydrateHelper("zoom",settings.zoom,withFallback,1)),hydrateHelper("customStyles",settings.customStyles,withFallback,!1)),hydrateHelper("multiSelectMode",settings.multiSelectMode,withFallback,!1)),hydrateHelper("multiSelectToggling",
settings.multiSelectToggling,withFallback,!0)),hydrateHelper("multiSelectKeys",settings.multiSelectKeys,withFallback,["Control","Shift","Meta"])),hydrateHelper("selector",settings.selector,withFallback,null)),hydrateHelper("selectionThreshold",settings.selectionThreshold,withFallback,0)),hydrateHelper("draggability",settings.draggability,withFallback,!0)),hydrateHelper("immediateDrag",settings.immediateDrag,withFallback,!0)),hydrateHelper("keyboardDrag",settings.keyboardDrag,withFallback,!0)),hydrateHelper("dragKeys",
settings.dragKeys,withFallback,{up:["ArrowUp"],down:["ArrowDown"],left:["ArrowLeft"],right:["ArrowRight"]})),hydrateHelper("keyboardDragSpeed",settings.keyboardDragSpeed,withFallback,10)),hydrateHelper("useTransform",settings.useTransform,withFallback,!0)),hydrateHelper("refreshMemoryRate",settings.refreshMemoryRate,withFallback,80)),hydrateHelper("dropZones",settings.dropZones,withFallback,[])),hydrateHelper("dropInsideThreshold",settings.dropInsideThreshold,withFallback,1)),hydrateHelper("dropTargetThreshold",
settings.dropTargetThreshold,withFallback,0)),hydrateHelper("usePointerEvents",settings.usePointerEvents,withFallback,!1)),hydrateHelper("hoverClass",settings.hoverClass,withFallback,"ds-hover")),hydrateHelper("selectableClass",settings.selectableClass,withFallback,"ds-selectable")),hydrateHelper("selectedClass",settings.selectedClass,withFallback,"ds-selected")),hydrateHelper("selectorClass",settings.selectorClass,withFallback,"ds-selector")),hydrateHelper("selectorAreaClass",settings.selectorAreaClass,
withFallback,"ds-selector-area")),hydrateHelper("droppedTargetClass",settings.droppedTargetClass,withFallback,"ds-dropped-target")),hydrateHelper("droppedInsideClass",settings.droppedInsideClass,withFallback,"ds-dropped-inside")),hydrateHelper("droppableClass",settings.droppableClass,withFallback,"ds-droppable")),hydrateHelper("dropZoneClass",settings.dropZoneClass,withFallback,"ds-dropzone")),hydrateHelper("dropZoneReadyClass",settings.dropZoneReadyClass,withFallback,"ds-dropzone-ready")),hydrateHelper("dropZoneTargetClass",
settings.dropZoneTargetClass,withFallback,"ds-dropzone-target")),hydrateHelper("dropZoneInsideClass",settings.dropZoneInsideClass,withFallback,"ds-dropzone-inside")),hydrateHelper("dragAsBlock",settings.dragAsBlock,withFallback,!1))},isCollision=function(el1,el2){var percent=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,element1=el1;0<percent&&(element1=(el1.right-el1.left)*percent,percent*=el1.bottom-el1.top,element1={left:el1.left+element1,right:el1.right-element1,top:el1.top+percent,
bottom:el1.bottom-percent});return element1.left<el2.right&&element1.right>el2.left&&element1.top<el2.bottom&&element1.bottom>el2.top?!0:!1},subscriberAliases=function(_ref){var subscribe=_ref.subscribe,publish=_ref.publish,Interaction=_ref.Interaction,SelectedSet=_ref.SelectedSet,DropZones=_ref.DropZones;_ref=function(){var _Object$entries$_i=_slicedToArray(_Object$entries[_i],2),sub_name=_Object$entries$_i[0],pubs=_Object$entries$_i[1];["pre",!1].forEach(function(filler){return subscribe(filler?
"".concat(sub_name,":").concat(filler):sub_name,function(data){return pubs.forEach(function(pub){return(!pub.condition||pub.condition(data))&&publish(filler?"".concat(filler).concat(pub.name):pub.name,_objectSpread2(_objectSpread2({items:SelectedSet.elements,isDragging:Interaction.isDragging},data),pub.extraData?pub.extraData(data):{}))})})})};for(var _i=0,_Object$entries=Object.entries({"Selected:added":[{name:"elementselect"}],"Selected:removed":[{name:"elementunselect"}],"Area:scroll":[{name:"autoscroll"}],
"Interaction:start":[{name:"dragstart"}],"Interaction:update":[{name:"dragmove",condition:function(data){return data.event}}],"Interaction:end":[{name:"callback",extraData:function(){var target=DropZones.getTarget();return _objectSpread2({},target?{dropTarget:target.toObject()}:{})}}]});_i<_Object$entries.length;_i++)_ref()},toArray=function(items){return items?!Array.isArray(items)&&(items instanceof HTMLElement||items instanceof SVGElement)?[items]:_toConsumableArray(new Set(_toConsumableArray(items))):
[]},updateElementStylePos=function(element,pos){element.style.left="".concat(pos.left,"px");element.style.top="".concat(pos.top,"px");element.style.width="".concat(pos.width,"px");element.style.height="".concat(pos.height,"px")},Area=function(){function Area(_ref){var _this=this;_ref=_ref.DS;_classCallCheck(this,Area);_defineProperty(this,"DS",void 0);_defineProperty(this,"_observers",void 0);_defineProperty(this,"_node",void 0);_defineProperty(this,"_parentNodes",void 0);_defineProperty(this,"_computedStyle",
void 0);_defineProperty(this,"_computedBorder",void 0);_defineProperty(this,"_rect",void 0);_defineProperty(this,"setArea",function(area){_this.reset();_this._node=area;handleElementPositionAttribute({computedStyle:_this.computedStyle,node:_this._node});setTimeout(function(){_this.DS.PubSub.publish("Area:modified:pre",{item:_this});_this.reset();_this.DS.PubSub.publish("Area:modified",{item:_this})})});_defineProperty(this,"start",function(){_this._observers=addModificationObservers(_this.parentNodes,
debounce(function(event){_this.DS.PubSub.publish("Area:modified:pre",{event:event,item:_this});_this.reset();_this.DS.PubSub.publish("Area:modified",{event:event,item:_this})},60))});_defineProperty(this,"reset",function(){_this._computedStyle=void 0;_this._rect=void 0;_this._computedBorder=void 0;_this._parentNodes=void 0});_defineProperty(this,"stop",function(){_this._observers.cleanup();_this.reset()});_defineProperty(this,"scroll",function(directions,multiplier){var data={scroll_directions:directions,
scroll_multiplier:multiplier};_this.DS.PubSub.publish("Area:scroll:pre",data);var element=_this._node;if(directions.length){var docEl=document&&document.documentElement&&document.documentElement.scrollTop&&document.documentElement;element=element instanceof Document?docEl||document.body:element;docEl=directions.includes("top")&&0<element.scrollTop;var scrollBot=directions.includes("bottom")&&element.scrollTop<element.scrollHeight,scrollLeft=directions.includes("left")&&0<element.scrollLeft;directions=
directions.includes("right")&&element.scrollLeft<element.scrollWidth;docEl&&(element.scrollTop-=1*multiplier);scrollBot&&(element.scrollTop+=1*multiplier);scrollLeft&&(element.scrollLeft-=1*multiplier);directions&&(element.scrollLeft+=1*multiplier)}_this.DS.PubSub.publish("Area:scroll",data)});this.DS=_ref;this.setArea(this.DS.stores.SettingsStore.s.area);this.DS.PubSub.subscribe("Settings:updated:area",function(_ref2){_this.setArea(_ref2.settings.area)});this.DS.PubSub.subscribe("Interaction:init",
this.start);this.DS.PubSub.subscribe("Interaction:end",this.reset)}_createClass(Area,[{key:"HTMLNode",get:function(){return this._node}},{key:"computedBorder",get:function(){return this._computedBorder?this._computedBorder:{top:parseInt(this.computedStyle.borderTopWidth),bottom:parseInt(this.computedStyle.borderBottomWidth),left:parseInt(this.computedStyle.borderLeftWidth),right:parseInt(this.computedStyle.borderRightWidth)}}},{key:"computedStyle",get:function(){return this._computedStyle?this._computedStyle:
this.HTMLNode instanceof Document?this._computedStyle=window.getComputedStyle(this.HTMLNode.body||this.HTMLNode.documentElement):this._computedStyle=window.getComputedStyle(this.HTMLNode)}},{key:"rect",get:function(){if(this._rect)return this._rect;var JSCompiler_inline_result=this.HTMLNode;var zoom=this.DS.stores.SettingsStore.s.zoom;if(JSCompiler_inline_result instanceof Document)JSCompiler_inline_result={top:0,left:0,bottom:0,right:0,width:window.innerWidth,height:window.innerHeight};else{var rect=
JSCompiler_inline_result.getBoundingClientRect();JSCompiler_inline_result={top:rect.top,left:rect.left,bottom:rect.bottom,right:rect.right,width:(JSCompiler_inline_result.clientWidth||rect.width)*zoom,height:(JSCompiler_inline_result.clientHeight||rect.height)*zoom}}return this._rect=JSCompiler_inline_result}},{key:"parentNodes",get:function(){return this._parentNodes?this._parentNodes:this._parentNodes=getAllParentNodes(this.HTMLNode)}}]);return Area}(),Drag=function(){function Drag(_ref){var _this=
this;_ref=_ref.DS;_classCallCheck(this,Drag);_defineProperty(this,"_prevCursorPos",void 0);_defineProperty(this,"_prevScrollPos",void 0);_defineProperty(this,"_elements",[]);_defineProperty(this,"_dragKeys",void 0);_defineProperty(this,"_dragKeysFlat",[]);_defineProperty(this,"_selectionRect",void 0);_defineProperty(this,"assignDragkeys",function(){_this._dragKeys={up:_this.DS.stores.SettingsStore.s.dragKeys.up.map(function(k){return k.toLowerCase()}),down:_this.DS.stores.SettingsStore.s.dragKeys.down.map(function(k){return k.toLowerCase()}),
left:_this.DS.stores.SettingsStore.s.dragKeys.left.map(function(k){return k.toLowerCase()}),right:_this.DS.stores.SettingsStore.s.dragKeys.right.map(function(k){return k.toLowerCase()})};_this._dragKeysFlat=[].concat(_toConsumableArray(_this._dragKeys.up),_toConsumableArray(_this._dragKeys.down),_toConsumableArray(_this._dragKeys.left),_toConsumableArray(_this._dragKeys.right))});_defineProperty(this,"keyboardDrag",function(_ref2){var event=_ref2.event;_ref2=_ref2.key.toLowerCase();_this.DS.stores.SettingsStore.s.keyboardDrag&&
_this._dragKeysFlat.includes(_ref2)&&_this.DS.SelectedSet.size&&_this.DS.stores.SettingsStore.s.draggability&&!_this.DS["continue"]&&(event={event:event,isDragging:!0,isDraggingKeyboard:!0},_this.DS.publish(["Interaction:start:pre","Interaction:start"],event),_this._elements=_this.DS.getSelection(),_this.DS.stores.SettingsStore.s.dragAsBlock&&(_this._selectionRect=getBoundingClientRect(_this._elements,_this.DS.SelectableSet)),_this.handleZIndex(!0),_ref2=handleKeyboardDragPosDifference({shiftKey:_this.DS.stores.KeyStore.currentValues.includes("shift"),
keyboardDragSpeed:_this.DS.stores.SettingsStore.s.keyboardDragSpeed,zoom:_this.DS.stores.SettingsStore.s.zoom,key:_ref2,scrollCallback:_this.DS.Area.scroll,scrollDiff:_this._scrollDiff,canScroll:_this.DS.stores.ScrollStore.canScroll,dragKeys:_this._dragKeys}),_this.DS.stores.SettingsStore.s.dragAsBlock&&(_ref2=_this.limitDirection(_ref2)),_this._elements.forEach(function(element){return null}),_this.DS.publish(["Interaction:update:pre","Interaction:update"],event))});_defineProperty(this,"keyboardEnd",
function(_ref3){var event=_ref3.event;_ref3=_ref3.key.toLowerCase();_this.DS.stores.SettingsStore.s.keyboardDrag&&_this._dragKeysFlat.includes(_ref3)&&_this.DS.SelectedSet.size&&_this.DS.stores.SettingsStore.s.draggability&&_this.DS.publish(["Interaction:end:pre","Interaction:end"],{event:event,isDragging:_this.DS.stores.SettingsStore.s.draggability,isDraggingKeyboard:!0})});_defineProperty(this,"start",function(_ref4){var isDraggingKeyboard=_ref4.isDraggingKeyboard;_ref4.isDragging&&!isDraggingKeyboard&&
(_this._prevCursorPos=null,_this._prevScrollPos=null,_this._elements=_this.DS.getSelection(),_this.DS.stores.SettingsStore.s.dragAsBlock&&(_this._selectionRect=getBoundingClientRect(_this._elements,_this.DS.SelectableSet)),_this.handleZIndex(!0))});_defineProperty(this,"stop",function(evt){null!==evt&&void 0!==evt&&evt.isKeyboard||(_this._prevCursorPos=null,_this._prevScrollPos=null,_this.handleZIndex(!1),_this._elements=[])});_defineProperty(this,"update",function(_ref5){var isDraggingKeyboard=_ref5.isDraggingKeyboard;
_ref5.isDragging&&_this._elements.length&&!isDraggingKeyboard&&!_this.DS["continue"]&&(_ref5=calc(_this._cursorDiff,"+",_this._scrollDiff),_this.DS.stores.SettingsStore.s.dragAsBlock&&(_ref5=_this.limitDirection(_ref5)),_this._elements.forEach(function(element){return null}))});_defineProperty(this,"limitDirection",function(direction){var containerRect=_this.DS.SelectorArea.rect,scrollAmount=_this.DS.stores.ScrollStore.scrollAmount,JSCompiler_object_inline_top_108=containerRect.top-_this._selectionRect.top+
scrollAmount.y,JSCompiler_object_inline_left_109=containerRect.left-_this._selectionRect.left+scrollAmount.x,JSCompiler_object_inline_bottom_110=containerRect.bottom-_this._selectionRect.bottom+scrollAmount.y;containerRect=containerRect.right-_this._selectionRect.right+scrollAmount.x;if(0===direction.x&&0===direction.y)return direction;0>direction.y&&(direction.y=Math.max(direction.y,JSCompiler_object_inline_top_108));0>direction.x&&(direction.x=Math.max(direction.x,JSCompiler_object_inline_left_109));
0<direction.y&&(direction.y=Math.min(direction.y,JSCompiler_object_inline_bottom_110));0<direction.x&&(direction.x=Math.min(direction.x,containerRect));_this._selectionRect.top+=direction.y;_this._selectionRect.bottom+=direction.y;_this._selectionRect.left+=direction.x;_this._selectionRect.right+=direction.x;return direction});_defineProperty(this,"handleZIndex",function(add){_this._elements.forEach(function(element){return element.style.zIndex="".concat((parseInt(element.style.zIndex)||0)+add?9999:
-9998)})});this.DS=_ref;this.DS.subscribe("Settings:updated:dragKeys",this.assignDragkeys);this.assignDragkeys();this.DS.subscribe("Interaction:start",this.start);this.DS.subscribe("Interaction:end",this.stop);this.DS.subscribe("Interaction:update",this.update);this.DS.subscribe("KeyStore:down",this.keyboardDrag);this.DS.subscribe("KeyStore:up",this.keyboardEnd)}_createClass(Drag,[{key:"_cursorDiff",get:function(){var currentPointerVal=this.DS.stores.PointerStore.currentVal,cursorDiff=this._prevCursorPos?
calc(currentPointerVal,"-",this._prevCursorPos):{x:0,y:0};this._prevCursorPos=currentPointerVal;return cursorDiff}},{key:"_scrollDiff",get:function(){var currentScrollVal=this.DS.stores.ScrollStore.currentVal,scrollDiff=this._prevScrollPos?calc(currentScrollVal,"-",this._prevScrollPos):{x:0,y:0};this._prevScrollPos=currentScrollVal;return scrollDiff}}]);return Drag}(),DropZone=function(){function DropZone(_ref){var _this=this,DS=_ref.DS,id=_ref.id,element=_ref.element;_ref=_ref.droppables;_classCallCheck(this,
DropZone);_defineProperty(this,"id",void 0);_defineProperty(this,"element",void 0);_defineProperty(this,"_droppables",void 0);_defineProperty(this,"_rect",void 0);_defineProperty(this,"_observers",void 0);_defineProperty(this,"_timeout",void 0);_defineProperty(this,"_itemsDropped",[]);_defineProperty(this,"_itemsInside",void 0);_defineProperty(this,"setReadyClasses",function(action){if(!_this.isDestroyed){var selectedEls=_this.droppables.filter(function(el){return _this.DS.SelectedSet.has(el)});selectedEls.length&&
(selectedEls.forEach(function(item){item.classList[action]("".concat(_this.Settings.droppableClass));item.classList[action]("".concat(_this.Settings.droppableClass,"-").concat(_this.id))}),_this.element.classList[action]("".concat(_this.Settings.dropZoneReadyClass)))}});_defineProperty(this,"handleNoDrop",function(){var _this$_itemsDropped;_this.isDestroyed||(_this.DS.SelectedSet.forEach(function(item){item.classList.remove(_this.Settings.droppedTargetClass);item.classList.remove("".concat(_this.Settings.droppedTargetClass,
"-").concat(_this.id))}),_this._itemsDropped=_this._itemsDropped.filter(function(item){return!_this.DS.SelectedSet.has(item)}),null!==(_this$_itemsDropped=_this._itemsDropped)&&void 0!==_this$_itemsDropped&&_this$_itemsDropped.length||_this.element.classList.remove("".concat(_this.Settings.dropZoneTargetClass)))});_defineProperty(this,"handleDrop",function(){var _this$droppables,_this$_itemsDropped2,_this$_itemsDropped3;_this.isDestroyed||(_this._itemsDropped=_toConsumableArray(new Set([].concat(_toConsumableArray(_this._itemsDropped),
_toConsumableArray(null===(_this$droppables=_this.droppables)||void 0===_this$droppables?void 0:_this$droppables.filter(function(item){return _this.DS.SelectedSet.has(item)}))))),null===(_this$_itemsDropped2=_this._itemsDropped)||void 0===_this$_itemsDropped2?void 0:_this$_itemsDropped2.forEach(function(item){item.classList.add("".concat(_this.Settings.droppedTargetClass));item.classList.add("".concat(_this.Settings.droppedTargetClass,"-").concat(_this.id))}),null!==(_this$_itemsDropped3=_this._itemsDropped)&&
void 0!==_this$_itemsDropped3&&_this$_itemsDropped3.length&&_this.element.classList.add("".concat(_this.Settings.dropZoneTargetClass)))});_defineProperty(this,"handleItemsInsideClasses",function(){var isAnyInside=!1;_this.droppables.forEach(function(item){_this.itemsInside.includes(item)?(item.classList.add("".concat(_this.Settings.droppedInsideClass)),item.classList.add("".concat(_this.Settings.droppedInsideClass,"-").concat(_this.id)),isAnyInside=!0):(item.classList.remove("".concat(_this.Settings.droppedInsideClass,
"-").concat(_this.id)),item.className.includes("".concat(_this.Settings.droppedInsideClass,"-"))||item.classList.remove("".concat(_this.Settings.droppedInsideClass)))});isAnyInside?_this.element.classList.add("".concat(_this.Settings.dropZoneInsideClass)):_this.element.classList.remove("".concat(_this.Settings.dropZoneInsideClass))});_defineProperty(this,"start",function(_ref2){_ref2.isDragging&&!_this.isDestroyed&&_this.setReadyClasses("add")});_defineProperty(this,"stop",function(_ref3){_ref3.isDragging&&
!_this.isDestroyed&&(_this.setReadyClasses("remove"),_this.handleItemsInsideClasses())});_defineProperty(this,"toObject",function(){return{id:_this.id,element:_this.element,droppables:_this.droppables,itemsDropped:_this.itemsDropped,itemsInside:_this.itemsInside}});this.DS=DS;this.Settings=DS.stores.SettingsStore.s;this.id=id;this.element=element;_ref&&(this.droppables=toArray(_ref));this.element.classList.add("".concat(this.Settings.dropZoneClass));this.DS.subscribe("Settings:updated:dropZoneClass",
function(_ref4){_ref4=_ref4.settings;_this.element&&(_this.element.classList.remove(_ref4["dropZoneClass:pre"]),_this.element.classList.add(_ref4.dropZoneClass))});this._observers=addModificationObservers(this.parentNodes,debounce(function(){return _this._rect=null},this.Settings.refreshMemoryRate));this.DS.subscribe("Interaction:start",this.start);this.DS.subscribe("Interaction:end",this.stop)}_createClass(DropZone,[{key:"destroy",value:function(){var _this2=this;this._observers.cleanup();this.element.classList.remove("".concat(this.Settings.dropZoneClass));
this.element.classList.remove("".concat(this.Settings.dropZoneTargetClass));this.element.classList.remove("".concat(this.Settings.dropZoneReadyClass));this.droppables.forEach(function(item){item.classList.remove("".concat(_this2.Settings.droppedTargetClass));item.classList.remove("".concat(_this2.Settings.droppedTargetClass,"-").concat(_this2.id));item.classList.remove("".concat(_this2.Settings.droppableClass));item.classList.remove("".concat(_this2.Settings.droppableClass,"-").concat(_this2.id))});
this.DS.unsubscribe("Interaction:start",this.start);this.DS.unsubscribe("Interaction:end",this.stop);this._itemsInside=this._itemsDropped=this.id=this.droppables=this.element=null;this.isDestroyed=!0}},{key:"rect",get:function(){return this.isDestroyed?null:this._rect?this._rect:this._rect=this.element.getBoundingClientRect()}},{key:"itemsDropped",get:function(){return this.isDestroyed?null:this._itemsDropped}},{key:"itemsInside",get:function(){var _this3=this;if(this.isDestroyed)return null;if(this._itemsInside)return this._itemsInside;
this._itemsInside=this.droppables.flatMap(function(item){return isCollision(_this3.DS.SelectableSet.rects.get(item),_this3.rect,_this3.Settings.dropInsideThreshold)?[item]:[]});this._timeout&&clearTimeout(this._timeout);this._timeout=setTimeout(function(){return _this3._itemsInside=null},this.Settings.refreshMemoryRate);return this._itemsInside}},{key:"parentNodes",get:function(){return this._parentNodes?this._parentNodes:this._parentNodes=getAllParentNodes(this.element)}},{key:"droppables",get:function(){return this._droppables?
this._droppables:this.DS.SelectableSet.elements},set:function(value){this._droppables=value}}]);return DropZone}(),DropZones=_createClass(function DropZones(_ref){var _this=this;_ref=_ref.DS;_classCallCheck(this,DropZones);_defineProperty(this,"_zoneByElement",new Map);_defineProperty(this,"_zoneById",new Map);_defineProperty(this,"_zonesByDroppable",new Map);_defineProperty(this,"_zones",void 0);_defineProperty(this,"setDropZones",function(_ref2){if(_ref2=_ref2.dropZones)_this._zones&&_this._zones.forEach(function(zone){return zone.destroy()}),
_this._zones=_ref2.map(function(zone){return new DropZone(_objectSpread2({DS:_this.DS},zone))}),_this._zones.forEach(function(zone){_this._zoneByElement.set(zone.element,zone);_this._zoneById.set(zone.id,zone);zone.droppables.forEach(function(droppable){var zones=_this._zonesByDroppable.get(droppable);if(null===zones||void 0===zones||!zones.length)return _this._zonesByDroppable.set(droppable,[zone]);_this._zonesByDroppable.set(droppable,_toConsumableArray(new Set([].concat(_toConsumableArray(zones),
[zone]))))})})});_defineProperty(this,"_handleDrop",function(target){_this._zones.forEach(function(zone){zone!==target&&zone.handleNoDrop()});target&&target.handleDrop()});_defineProperty(this,"_getZoneByElementsFromPoint",function(elements,_ref3){var x=_ref3.x;_ref3=_ref3.y;for(var i=0,il=elements.length;i<il;i++){var zone=_this._zoneByElement.get(elements[i]);if(zone&&isCollision(zone.rect,{left:x,right:x,top:_ref3,bottom:_ref3},Math.min(_this.Settings.dropTargetThreshold,.5)))return zone}});_defineProperty(this,
"stop",function(_ref4){_ref4.isDragging&&(_ref4=_this.getTarget(),_this._handleDrop(_ref4))});_defineProperty(this,"getItemsDroppedById",function(zoneId){var zone=_this._zoneById.get(zoneId);return zone?zone.itemsDropped:console.warn("[DragSelect] No zone found (id: ".concat(zoneId,")"))});_defineProperty(this,"getItemsInsideById",function(zoneId,addClasses){var zone=_this._zoneById.get(zoneId);if(!zone)return console.warn("[DragSelect] No zone found (id: ".concat(zoneId,")"));zoneId=zone.itemsInside;
addClasses&&zone.handleItemsInsideClasses();return zoneId});_defineProperty(this,"getTarget",function(coordinates){var _this$_zones;if(null!==(_this$_zones=_this._zones)&&void 0!==_this$_zones&&_this$_zones.length){_this$_zones=(null===coordinates||void 0===coordinates?void 0:coordinates.x)||_this.DS.stores.PointerStore.currentVal.x;coordinates=(null===coordinates||void 0===coordinates?void 0:coordinates.y)||_this.DS.stores.PointerStore.currentVal.y;var elements=document.elementsFromPoint(_this$_zones,
coordinates);return _this._getZoneByElementsFromPoint(elements,{x:_this$_zones,y:coordinates})}});this.DS=_ref;this.Settings=_ref.stores.SettingsStore.s;this.DS.subscribe("Settings:updated:dropZones",function(_ref5){return _this.setDropZones(_ref5.settings)});this.setDropZones({dropZones:this.DS.stores.SettingsStore.s.dropZones});this.DS.subscribe("Interaction:end",this.stop)}),Interaction=function(){function Interaction(_ref){var _this=this;_ref=_ref.DS;_classCallCheck(this,Interaction);_defineProperty(this,
"isInteracting",void 0);_defineProperty(this,"isDragging",void 0);_defineProperty(this,"init",function(){return _this.DS.publish("Interaction:init:pre",{})});_defineProperty(this,"_init",function(){_this.stop();_this.Settings.usePointerEvents?_this.DS.Area.HTMLNode.addEventListener("pointerdown",_this.start,{passive:!1}):_this.DS.Area.HTMLNode.addEventListener("mousedown",_this.start);_this.DS.Area.HTMLNode.addEventListener("touchstart",_this.start,{passive:!1});_this.DS.publish("Interaction:init",
{})});_defineProperty(this,"start",function(event){return _this.DS.publish("Interaction:start:pre",{event:event,isDragging:_this.isDragging})});_defineProperty(this,"_start",function(event){"touchstart"===event.type&&event.preventDefault();_this._canInteract(event)&&(_this.isInteracting=!0,_this.isDragging=_this.isDragEvent(event),_this.DS.publish("Interaction:start",{event:event,isDragging:_this.isDragging}),_this.Settings.usePointerEvents?(document.addEventListener("pointerup",_this.reset),document.addEventListener("pointercancel",
_this.reset)):document.addEventListener("mouseup",_this.reset),document.addEventListener("touchend",_this.reset))});_defineProperty(this,"isDragEvent",function(event){var clickedElement=event.target.closest(".".concat(_this.Settings.selectableClass));if(!_this.Settings.draggability||_this.DS.stores.KeyStore.isMultiSelectKeyPressed(event)||!clickedElement)return!1;_this.Settings.immediateDrag&&(_this.DS.SelectedSet.size?_this.DS.SelectedSet.has(clickedElement)||(_this.DS.SelectedSet.clear(),_this.DS.SelectedSet.add(clickedElement)):
_this.DS.SelectedSet.add(clickedElement));return _this.DS.SelectedSet.has(clickedElement)?!0:!1});_defineProperty(this,"onClick",function(_ref2){_ref2=_ref2.event;if(_this._canInteract(_ref2)&&!(0<_ref2.detail)){var _this$DS=_this.DS,_this$DS$stores=_this$DS.stores,KeyStore=_this$DS$stores.KeyStore,SelectableSet=_this$DS.SelectableSet;_this$DS=_this$DS.SelectedSet;_this$DS$stores.PointerStore.start(_ref2);_this$DS$stores=_ref2.target;SelectableSet.has(_this$DS$stores)&&(KeyStore.isMultiSelectKeyPressed(_ref2)||
_this$DS.clear(),_this$DS.toggle(_this$DS$stores),_this.reset())}});_defineProperty(this,"stop",function(){var area=0<arguments.length&&void 0!==arguments[0]?arguments[0]:_this.DS.Area.HTMLNode;_this.isInteracting=!1;_this.isDragging=!1;_this.Settings.usePointerEvents?(area.removeEventListener("pointerdown",_this.start,{passive:!1}),document.removeEventListener("pointerup",_this.reset),document.removeEventListener("pointercancel",_this.reset)):(area.removeEventListener("mousedown",_this.start),document.removeEventListener("mouseup",
_this.reset));area.removeEventListener("touchstart",_this.start,{passive:!1});document.removeEventListener("touchend",_this.reset)});_defineProperty(this,"update",function(_ref3){var event=_ref3.event,scroll_directions=_ref3.scroll_directions;_ref3=_ref3.scroll_multiplier;_this.isInteracting&&_this.DS.publish(["Interaction:update:pre","Interaction:update"],{event:event,scroll_directions:scroll_directions,scroll_multiplier:_ref3,isDragging:_this.isDragging})});_defineProperty(this,"reset",function(event){return _this.DS.publish("Interaction:end:pre",
{event:event,isDragging:_this.isDragging})});_defineProperty(this,"_reset",function(event){var isDragging=_this.isDragging;_this.stop();_this.init();_this.DS.publish("Interaction:end",{event:event,isDragging:isDragging})});this.DS=_ref;this.Settings=_ref.stores.SettingsStore.s;this.DS.subscribe("Settings:updated:area",function(_ref4){_this.stop(_ref4.settings["area:pre"]);_this.init()});this.DS.subscribe("PointerStore:updated",this.update);this.DS.subscribe("Selectable:click",this.onClick);this.DS.subscribe("Selectable:pointer",
function(_ref5){return _this.start(_ref5.event)});this.DS.subscribe("Interaction:start:pre",function(_ref6){return _this._start(_ref6.event)});this.DS.subscribe("Interaction:init:pre",this._init);this.DS.subscribe("Interaction:end:pre",function(_ref7){return _this._reset(_ref7.event)});this.DS.subscribe("Area:scroll",this.update)}_createClass(Interaction,[{key:"_canInteract",value:function(event){var isKeyboardClick=0===event.clientX&&0===event.clientY&&0===event.detail&&event.target;return 2===event.button||
this.isInteracting||event.target&&!this.DS.SelectorArea.isInside(event.target)||!isKeyboardClick&&!this.DS.SelectorArea.isClicked(event)?!1:!0}}]);return Interaction}(),PubSub=_createClass(function PubSub(_ref){var _this=this;_ref=_ref.DS;_classCallCheck(this,PubSub);_defineProperty(this,"subscribers",{});_defineProperty(this,"subscribe",function(eventName,callback){Array.isArray(_this.subscribers[eventName])||(_this.subscribers[eventName]=[]);_this.subscribers[eventName].push(callback);return _this.subscribers[eventName].length-
1});_defineProperty(this,"unsubscribe",function(eventName,callback,id){0<=id?_this.subscribers[eventName].splice(id,1):callback&&(_this.subscribers[eventName]=_this.subscribers[eventName].filter(function(cb){return cb!==callback}))});_defineProperty(this,"publish",function(eventName,data){Array.isArray(eventName)?eventName.forEach(function(name){return _this._publish(name,data)}):_this._publish(eventName,data)});_defineProperty(this,"_publish",function(eventName,data){var subscribers=_this.subscribers[eventName];
Array.isArray(subscribers)&&(eventName.includes(":pre")?_this._handlePrePublish(subscribers,data):_this._handlePublish(subscribers,data))});_defineProperty(this,"_handlePublish",function(subscribers,data){for(var i=0,il=subscribers.length;i<il&&!_this.DS.stopped;i++)subscribers[i](data)});_defineProperty(this,"_handlePrePublish",function(subscribers,data){for(var i=subscribers.length;i--&&!_this.DS.stopped;)subscribers[i](data)});this.DS=_ref}),SelectableSet=function(_Set){function SelectableSet(_ref){_ref=
_ref.DS;_classCallCheck(this,SelectableSet);var _this=_super.call(this);_defineProperty(_assertThisInitialized(_this),"_rects",void 0);_defineProperty(_assertThisInitialized(_this),"_timeout",void 0);_defineProperty(_assertThisInitialized(_this),"init",function(){return toArray(_this.Settings.selectables).forEach(function(el){return _this.add(el)})});_defineProperty(_assertThisInitialized(_this),"clear",function(){return _this.forEach(function(el){return _this["delete"](el)})});_defineProperty(_assertThisInitialized(_this),
"_onClick",function(event){return _this.DS.publish(["Selectable:click:pre","Selectable:click"],{event:event})});_defineProperty(_assertThisInitialized(_this),"_onPointer",function(event){return _this.DS.publish(["Selectable:pointer:pre","Selectable:pointer"],{event:event})});_defineProperty(_assertThisInitialized(_this),"addAll",function(elements){return elements.forEach(function(el){return _this.add(el)})});_defineProperty(_assertThisInitialized(_this),"deleteAll",function(elements){return elements.forEach(function(el){return _this["delete"](el)})});
_defineProperty(_assertThisInitialized(_this),"getRect",function(element){return _this._rects?_this.rects.get(element):element.getBoundingClientRect()});_this.DS=_ref;_this.Settings=_ref.stores.SettingsStore.s;_this.DS.subscribe("Interaction:init",_this.init);_this.DS.PubSub.subscribe("Settings:updated:selectables",function(){_this.clear();_this.init()});_this.DS.subscribe("Settings:updated:selectableClass",function(_ref2){var settings=_ref2.settings;_this.forEach(function(el){el.classList.remove(settings["selectableClass:pre"]);
el.classList.add(settings.selectableClass)})});return _this}_inherits(SelectableSet,_Set);var _super=_createSuper(SelectableSet);_createClass(SelectableSet,[{key:"add",value:function(element){if(_get(_getPrototypeOf(SelectableSet.prototype),"has",this).call(this,element))return this;var publishData={items:this.elements,item:element};this.DS.publish("Selectable:added:pre",publishData);element.classList.add(this.Settings.selectableClass);element.addEventListener("click",this._onClick);this.Settings.usePointerEvents?
element.addEventListener("pointerdown",this._onPointer,{passive:!1}):element.addEventListener("mousedown",this._onPointer);element.addEventListener("touchstart",this._onPointer,{passive:!1});this.Settings.draggability&&!this.Settings.useTransform&&handleElementPositionAttribute({computedStyle:window.getComputedStyle(element),node:element});_get(_getPrototypeOf(SelectableSet.prototype),"add",this).call(this,element);this.DS.publish("Selectable:added",publishData);return this}},{key:"delete",value:function(element){if(!_get(_getPrototypeOf(SelectableSet.prototype),
"has",this).call(this,element))return!0;var publishData={items:this.elements,item:element};this.DS.publish("Selectable:removed:pre",publishData);element.classList.remove(this.Settings.selectableClass);element.classList.remove(this.Settings.hoverClass);element.removeEventListener("click",this._onClick);this.Settings.usePointerEvents?element.removeEventListener("pointerdown",this._onPointer,{passive:!1}):element.removeEventListener("mousedown",this._onPointer);element.removeEventListener("touchstart",
this._onPointer,{passive:!1});_get(_getPrototypeOf(SelectableSet.prototype),"delete",this).call(this,element);this.DS.publish("Selectable:removed",publishData);return!0}},{key:"elements",get:function(){return Array.from(this.values())}},{key:"rects",get:function(){var _this2=this;if(this._rects)return this._rects;this._rects=new Map;this.forEach(function(element){return _this2._rects.set(element,element.getBoundingClientRect())});this._timeout&&clearTimeout(this._timeout);this._timeout=setTimeout(function(){return _this2._rects=
null},this.Settings.refreshMemoryRate);return this._rects}}]);return SelectableSet}(_wrapNativeSuper(Set)),SelectedSet=function(_Set){function SelectedSet(_ref){_ref=_ref.DS;_classCallCheck(this,SelectedSet);var _this=_super.call(this);_defineProperty(_assertThisInitialized(_this),"clear",function(){return _this.forEach(function(el){return _this["delete"](el)})});_defineProperty(_assertThisInitialized(_this),"addAll",function(elements){return elements.forEach(function(el){return _this.add(el)})});
_defineProperty(_assertThisInitialized(_this),"deleteAll",function(elements){return elements.forEach(function(el){return _this["delete"](el)})});_this.DS=_ref;return _this}_inherits(SelectedSet,_Set);var _super=_createSuper(SelectedSet);_createClass(SelectedSet,[{key:"add",value:function(element){if(_get(_getPrototypeOf(SelectedSet.prototype),"has",this).call(this,element))return this;var publishData={items:this.elements,item:element};this.DS.publish("Selected:added:pre",publishData);_get(_getPrototypeOf(SelectedSet.prototype),
"add",this).call(this,element);element.classList.add(this.DS.stores.SettingsStore.s.selectedClass);element.style.zIndex="".concat((parseInt(element.style.zIndex)||0)+1);this.DS.publish("Selected:added",publishData);return this}},{key:"delete",value:function(element){if(!_get(_getPrototypeOf(SelectedSet.prototype),"has",this).call(this,element))return!0;var publishData={items:this.elements,item:element};this.DS.publish("Selected:removed:pre",publishData);var deleted=_get(_getPrototypeOf(SelectedSet.prototype),
"delete",this).call(this,element);element.classList.remove(this.DS.stores.SettingsStore.s.selectedClass);element.style.zIndex="".concat((parseInt(element.style.zIndex)||0)-1);this.DS.publish("Selected:removed",publishData);return deleted}},{key:"toggle",value:function(element){if(this.has(element))this["delete"](element);else this.add(element);return element}},{key:"elements",get:function(){return Array.from(this.values())}}]);return SelectedSet}(_wrapNativeSuper(Set)),Selection$jscomp$0=function(){function Selection(_ref){var _this=
this;_ref=_ref.DS;_classCallCheck(this,Selection);_defineProperty(this,"_prevSelectedSet",void 0);_defineProperty(this,"start",function(_ref2){var event=_ref2.event;_ref2.isDragging||(_this._storePrevious(event),_this._handleInsideSelection(!0,event))});_defineProperty(this,"update",function(_ref3){_ref3.isDragging||_this.DS["continue"]||_this._handleInsideSelection()});_defineProperty(this,"_handleInsideSelection",function(force,event){var _this$DS=_this.DS,SelectableSet=_this$DS.SelectableSet,SelectorArea=
_this$DS.SelectorArea;_this$DS=_this$DS.Selector;var multiSelectionToggle=_this.DS.stores.KeyStore.isMultiSelectKeyPressed(event)&&_this.Settings.multiSelectToggling;event=_this.Settings.selectionThreshold;SelectableSet=SelectableSet.rects;_this$DS=_this$DS.rect;var select=new Map,unselect=new Map;SelectableSet=_createForOfIteratorHelper(SelectableSet);var _step;try{for(SelectableSet.s();!(_step=SelectableSet.n()).done;){var _step$value=_slicedToArray(_step.value,2),element$jscomp$0=_step$value[0],
elementRect=_step$value[1];SelectorArea.isInside(element$jscomp$0,elementRect)&&(isCollision(elementRect,_this$DS,event)?select.set(element$jscomp$0,elementRect):unselect.set(element$jscomp$0,elementRect))}}catch(err){SelectableSet.e(err)}finally{SelectableSet.f()}_this.DS["continue"]||(SelectorArea=_this.filterSelected({select:select,unselect:unselect,selectorRect:_this$DS}),_step=SelectorArea.unselect,SelectorArea.select.forEach(function(_,element){_=_this.DS.SelectedSet;var hoverClassName=_this.Settings.hoverClass;
if(!element.classList.contains(hoverClassName)||force){if(!_.has(element))_.add(element);else if(multiSelectionToggle)_["delete"](element);element.classList.add(hoverClassName)}}),_step.forEach(function(_,element){_=_this.DS.SelectedSet;var PrevSelectedSet=_this._prevSelectedSet,hoverClassName=_this.Settings.hoverClass;if(element.classList.contains(hoverClassName)||force){var inSelection=_.has(element);PrevSelectedSet=PrevSelectedSet.has(element);if(inSelection&&!PrevSelectedSet)_["delete"](element);
else!inSelection&&PrevSelectedSet&&_.add(element);element.classList.remove(hoverClassName);element=void 0}else element=!1;return element}))});_defineProperty(this,"filterSelected",function(_ref4){var select=_ref4.select,unselect=_ref4.unselect;_ref4.selectorRect;return{select:select,unselect:unselect}});this.DS=_ref;this.Settings=this.DS.stores.SettingsStore.s;this.DS.subscribe("Interaction:start",this.start);this.DS.subscribe("Interaction:update",this.update)}_createClass(Selection,[{key:"_storePrevious",
value:function(event){var _this$DS2=this.DS,SelectedSet=_this$DS2.SelectedSet;_this$DS2.stores.KeyStore.isMultiSelectKeyPressed(event)?this._prevSelectedSet=new Set(SelectedSet):this._prevSelectedSet=new Set}}]);return Selection}(),Selector=function(){function Selector(_ref){var _this=this;_ref=_ref.DS;_classCallCheck(this,Selector);_defineProperty(this,"_rect",void 0);_defineProperty(this,"attachSelector",function(){var _this$DS$SelectorArea,_this$DS$SelectorArea2;_this.HTMLNode&&null!==(_this$DS$SelectorArea=
_this.DS.SelectorArea)&&void 0!==_this$DS$SelectorArea&&_this$DS$SelectorArea.HTMLNode&&_this.DS.SelectorArea.HTMLNode.removeChild(_this.HTMLNode);if(!(_this$DS$SelectorArea=_this.DS.stores.SettingsStore.s.selector)){_this$DS$SelectorArea=_this.DS.stores.SettingsStore.s.customStyles;var selector=document.createElement("div");selector.style.position="absolute";_this$DS$SelectorArea||(selector.style.background="rgba(0, 175, 255, 0.2)",selector.style.border="1px solid rgba(0, 175, 255, 0.8)",selector.style.display=
"none",selector.style.pointerEvents="none");_this$DS$SelectorArea=selector}_this.HTMLNode=_this$DS$SelectorArea;_this.HTMLNode.classList.add(_this.DS.stores.SettingsStore.s.selectorClass);_this.HTMLNode&&null!==(_this$DS$SelectorArea2=_this.DS.SelectorArea)&&void 0!==_this$DS$SelectorArea2&&_this$DS$SelectorArea2.HTMLNode&&_this.DS.SelectorArea.HTMLNode.appendChild(_this.HTMLNode)});_defineProperty(this,"start",function(_ref2){_ref2.isDragging||(updateElementStylePos(_this.HTMLNode,vect2rect(_this.DS.stores.PointerStore.initialValArea,
1)),_this.HTMLNode.style.display="block",_this._rect=null)});_defineProperty(this,"stop",function(){_this.HTMLNode.style.width="0";_this.HTMLNode.style.height="0";_this.HTMLNode.style.display="none"});_defineProperty(this,"update",function(_ref3){if(!_ref3.isDragging&&!_this.DS["continue"]){_ref3=_this.DS.stores;var PointerStore=_ref3.PointerStore;_ref3=_ref3.ScrollStore.scrollAmount;var initialPointerPos=PointerStore.initialValArea;PointerStore=PointerStore.currentValArea;var selectorPos={};PointerStore.x>
initialPointerPos.x-_ref3.x?(selectorPos.left=initialPointerPos.x-_ref3.x,selectorPos.width=PointerStore.x-initialPointerPos.x+_ref3.x):(selectorPos.left=PointerStore.x,selectorPos.width=initialPointerPos.x-PointerStore.x-_ref3.x);PointerStore.y>initialPointerPos.y-_ref3.y?(selectorPos.top=initialPointerPos.y-_ref3.y,selectorPos.height=PointerStore.y-initialPointerPos.y+_ref3.y):(selectorPos.top=PointerStore.y,selectorPos.height=initialPointerPos.y-PointerStore.y-_ref3.y);updateElementStylePos(_this.HTMLNode,
selectorPos);_this._rect=null}});this.DS=_ref;this.DS.subscribe("Settings:updated:selectorClass",function(_ref4){_ref4=_ref4.settings;_this.HTMLNode.classList.remove(_ref4["selectorClass:pre"]);_this.HTMLNode.classList.add(_ref4.selectorClass)});this.DS.subscribe("Settings:updated:selector",this.attachSelector);this.DS.subscribe("Settings:updated:customStyles",this.attachSelector);this.attachSelector();this.DS.subscribe("Interaction:start",this.start);this.DS.subscribe("Interaction:update",this.update);
this.DS.subscribe("Interaction:end",this.stop)}_createClass(Selector,[{key:"rect",get:function(){return this._rect?this._rect:this._rect=this.HTMLNode.getBoundingClientRect()}}]);return Selector}(),SelectorArea=function(){function SelectorArea(_ref){var _this=this;_ref=_ref.DS;_classCallCheck(this,SelectorArea);_defineProperty(this,"_scrollInterval",void 0);_defineProperty(this,"_rect",void 0);_defineProperty(this,"currentEdges",[]);_defineProperty(this,"start",function(){_this.applyElements("append");
_this.updatePos()});_defineProperty(this,"applyElements",function(){var docEl=document.body?"body":"documentElement",methodName="".concat(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"append","Child");_this.HTMLNode[methodName](_this.DS.Selector.HTMLNode);document[docEl][methodName](_this.HTMLNode)});_defineProperty(this,"updatePos",function(){_this._rect=null;var rect=_this.DS.Area.rect,border=_this.DS.Area.computedBorder,style=_this.HTMLNode.style,top="".concat(rect.top+border.top,"px");
border="".concat(rect.left+border.left,"px");var width="".concat(rect.width,"px");rect="".concat(rect.height,"px");style.top!==top&&(style.top=top);style.left!==border&&(style.left=border);style.width!==width&&(style.width=width);style.height!==rect&&(style.height=rect)});_defineProperty(this,"stop",function(remove){_this.stopAutoScroll();remove&&_this.applyElements("remove")});_defineProperty(this,"startAutoScroll",function(){_this.currentEdges=[];_this._scrollInterval=setInterval(function(){return _this.handleAutoScroll()},
16)});_defineProperty(this,"handleAutoScroll",function(){if(!_this.DS["continue"]){var _this$DS=_this.DS,Area=_this$DS.Area;_this$DS=vect2rect(_this$DS.stores.PointerStore.currentVal);var containerRect=_this.rect,_ref$tolerance=_this.DS.stores.SettingsStore.s.overflowTolerance;_ref$tolerance=void 0===_ref$tolerance?{x:0,y:0}:_ref$tolerance;var edges=[];_this$DS.top-_ref$tolerance.y<containerRect.top&&edges.push("top");_this$DS.left-_ref$tolerance.x<containerRect.left&&edges.push("left");_this$DS.bottom+
_ref$tolerance.y>containerRect.bottom&&edges.push("bottom");_this$DS.right+_ref$tolerance.y>containerRect.right&&edges.push("right");_this.currentEdges=edges;_this.currentEdges.length&&Area.scroll(_this.currentEdges,_this.DS.stores.SettingsStore.s.autoScrollSpeed)}});_defineProperty(this,"stopAutoScroll",function(){_this.currentEdges=[];clearInterval(_this._scrollInterval)});_defineProperty(this,"isInside",function(element,elementRect){return _this.DS.Area.HTMLNode.contains(element)&&_this.DS.stores.ScrollStore.canScroll?
!0:isCollision(_this.rect,elementRect||element.getBoundingClientRect())});this.DS=_ref;this.HTMLNode=createSelectorAreaElement();this.DS.subscribe("Settings:updated:selectorAreaClass",function(_ref2){_ref2=_ref2.settings;_this.HTMLNode.classList.remove(_ref2["selectorAreaClass:pre"]);_this.HTMLNode.classList.add(_ref2.selectorAreaClass)});this.HTMLNode.classList.add(this.DS.stores.SettingsStore.s.selectorAreaClass);this.DS.subscribe("Area:modified",this.updatePos);this.DS.subscribe("Area:modified",
this.updatePos);this.DS.subscribe("Interaction:init",this.start);this.DS.subscribe("Interaction:start",this.startAutoScroll);this.DS.subscribe("Interaction:end",function(){_this.updatePos();_this.stopAutoScroll()})}_createClass(SelectorArea,[{key:"isClicked",value:function(event){var PointerStore=this.DS.stores.PointerStore;event=event?PointerStore.getPointerPosition(event):PointerStore.initialVal;return isCollision({left:event.x,top:event.y,right:event.x,bottom:event.y},this.rect)}},{key:"rect",
get:function(){return this._rect?this._rect:this._rect=this.HTMLNode.getBoundingClientRect()}}]);return SelectorArea}(),KeyStore=function(){function KeyStore(_ref){var _this=this;_ref=_ref.DS;_classCallCheck(this,KeyStore);_defineProperty(this,"_currentValues",new Set);_defineProperty(this,"_keyMapping",{control:"ctrlKey",shift:"shiftKey",meta:"metaKey"});_defineProperty(this,"init",function(){document.addEventListener("keydown",_this.keydown);document.addEventListener("keyup",_this.keyup);window.addEventListener("blur",
_this.reset)});_defineProperty(this,"keydown",function(event){var key=event.key.toLowerCase();_this.DS.publish("KeyStore:down:pre",{event:event,key:key});_this._currentValues.add(key);_this.DS.publish("KeyStore:down",{event:event,key:key})});_defineProperty(this,"keyup",function(event){var key=event.key.toLowerCase();_this.DS.publish("KeyStore:up:pre",{event:event,key:key});_this._currentValues["delete"](key);_this.DS.publish("KeyStore:up",{event:event,key:key})});_defineProperty(this,"stop",function(){document.removeEventListener("keydown",
_this.keydown);document.removeEventListener("keyup",_this.reset);window.removeEventListener("blur",_this.reset);_this.reset()});_defineProperty(this,"reset",function(){return _this._currentValues.clear()});this.DS=_ref;this.DS.subscribe("Interaction:init",this.init)}_createClass(KeyStore,[{key:"isMultiSelectKeyPressed",value:function(event){var _this2=this;if(this.DS.stores.SettingsStore.s.multiSelectMode)return!0;var multiSelectKeys=this.DS.stores.SettingsStore.s.multiSelectKeys.map(function(key){return key.toLocaleLowerCase()});
return this.currentValues.some(function(key){return multiSelectKeys.includes(key.toLocaleLowerCase())})||event&&multiSelectKeys.some(function(key){return event[_this2._keyMapping[key]]})?!0:!1}},{key:"currentValues",get:function(){return Array.from(this._currentValues.values())}}]);return KeyStore}(),PointerStore=function(){function PointerStore(_ref){var _this=this;_ref=_ref.DS;_classCallCheck(this,PointerStore);_defineProperty(this,"_isMouseInteraction",!1);_defineProperty(this,"_initialValArea",
void 0);_defineProperty(this,"_currentValArea",void 0);_defineProperty(this,"_lastValArea",void 0);_defineProperty(this,"_initialVal",void 0);_defineProperty(this,"_currentVal",void 0);_defineProperty(this,"_lastVal",void 0);_defineProperty(this,"_lastTouch",void 0);_defineProperty(this,"init",function(){_this.Settings.usePointerEvents?document.addEventListener("pointermove",_this.update,{passive:!1}):document.addEventListener("mousemove",_this.update);document.addEventListener("touchmove",_this.update,
{passive:!1})});_defineProperty(this,"getPointerPosition",function(event){event=_this._normalizedEvent(event);return{x:event.clientX,y:event.clientY}});_defineProperty(this,"update",function(event){event&&(_this.DS.publish("PointerStore:updated:pre",{event:event}),_this.currentVal=_this.getPointerPosition(event),_this._isMouseInteraction&&_this.DS.publish("PointerStore:updated",{event:event}))});_defineProperty(this,"stop",function(){_this.Settings.usePointerEvents?document.removeEventListener("pointermove",
_this.update,{passive:!1}):document.removeEventListener("mousemove",_this.update);document.removeEventListener("touchmove",_this.update,{passive:!1});setTimeout(function(){return _this._isMouseInteraction=!1},100)});_defineProperty(this,"reset",function(event){event&&(_this.currentVal=_this.lastVal=_this.getPointerPosition(event),_this.stop(),_this.init())});this.DS=_ref;this.Settings=_ref.stores.SettingsStore.s;this.DS.subscribe("Interaction:init",this.init);this.DS.subscribe("Interaction:start",
function(_ref2){return _this.start(_ref2.event)});this.DS.subscribe("Interaction:end",function(_ref3){return _this.reset(_ref3.event)})}_createClass(PointerStore,[{key:"start",value:function(event){event&&(this._isMouseInteraction=!0,this.currentVal=this.initialVal=this.getPointerPosition(event))}},{key:"_normalizedEvent",value:function(event){"touches"in event&&"touchend"!==event.type&&(this._lastTouch=event);return"touches"in event?this._lastTouch.touches[0]:event}},{key:"initialValArea",get:function(){return this._initialValArea?
this._initialValArea:{x:0,y:0}}},{key:"currentValArea",get:function(){return this._currentValArea?this._currentValArea:{x:0,y:0}}},{key:"lastValArea",get:function(){return this._lastValArea?this._lastValArea:{x:0,y:0}}},{key:"initialVal",get:function(){return this._initialVal?this._initialVal:{x:0,y:0}},set:function(value){this._initialValArea=(this._initialVal=value)&&calc(value,"-",calc(rect2vect(this.DS.Area.rect),"+",rect2vect(this.DS.Area.computedBorder)))}},{key:"currentVal",get:function(){return this._currentVal?
this._currentVal:{x:0,y:0}},set:function(value){this._currentValArea=(this._currentVal=value)&&calc(value,"-",calc(rect2vect(this.DS.Area.rect),"+",rect2vect(this.DS.Area.computedBorder)))}},{key:"lastVal",get:function(){return this._lastVal?this._lastVal:{x:0,y:0}},set:function(value){this._lastValArea=(this._lastVal=value)&&calc(value,"-",calc(rect2vect(this.DS.Area.rect),"+",rect2vect(this.DS.Area.computedBorder)))}}]);return PointerStore}(),ScrollStore=function(){function ScrollStore(_ref){var _this=
this;_ref=_ref.DS;_classCallCheck(this,ScrollStore);_defineProperty(this,"_initialVal",void 0);_defineProperty(this,"_currentVal",void 0);_defineProperty(this,"_canScroll",void 0);_defineProperty(this,"init",function(){return _this.DS.stores.SettingsStore.s.area.addEventListener("scroll",_this.update)});_defineProperty(this,"start",function(){_this._currentVal=_this._initialVal=getCurrentScroll(_this.DS.stores.SettingsStore.s.area);_this.DS.stores.SettingsStore.s.area.addEventListener("scroll",_this.update)});
_defineProperty(this,"update",function(){return _this._currentVal=getCurrentScroll(_this.DS.stores.SettingsStore.s.area)});_defineProperty(this,"stop",function(){_this.DS.stores.SettingsStore.s.area.removeEventListener("scroll",_this.update);_this._initialVal={x:0,y:0};_this._canScroll=null});_defineProperty(this,"reset",function(){_this.stop();_this.start()});this.DS=_ref;this.DS.subscribe("Interaction:init",this.init);this.DS.subscribe("Interaction:start",function(){return _this.start()});this.DS.subscribe("Interaction:end",
function(){return _this.reset()})}_createClass(ScrollStore,[{key:"canScroll",get:function(){if("boolean"===typeof this._canScroll)var JSCompiler_temp=this._canScroll;else{JSCompiler_temp=this.DS.stores.SettingsStore.s.area;var scroll=getCurrentScroll(JSCompiler_temp);JSCompiler_temp=this._canScroll=scroll.x||scroll.y?!0:JSCompiler_temp instanceof Document?JSCompiler_temp.body?!!(JSCompiler_temp.body.scrollTop=1):!!(JSCompiler_temp.documentElement.scrollTop=1):!!(JSCompiler_temp.scrollTop=1)}return JSCompiler_temp}},
{key:"scrollAmount",get:function(){var scrollDiff=calc(this.currentVal,"-",this.initialVal),n=this.DS.stores.SettingsStore.s.zoom;n=calc(calc(scrollDiff,"*",{x:n,y:n}),"-",scrollDiff);return{x:scrollDiff.x+n.x,y:scrollDiff.y+n.y}}},{key:"initialVal",get:function(){return this._initialVal?this._initialVal:{x:0,y:0}}},{key:"currentVal",get:function(){this._currentVal||(this._currentVal=getCurrentScroll(this.DS.stores.SettingsStore.s.area));return this._currentVal}}]);return ScrollStore}(),SettingsStore=
_createClass(function SettingsStore(_ref){var _this=this,DS=_ref.DS;_ref=_ref.settings;_classCallCheck(this,SettingsStore);_defineProperty(this,"_settings",{});_defineProperty(this,"s",{});_defineProperty(this,"update",function(_ref2){var init=_ref2.init;return _this.DS.publish("Settings:updated:pre",_objectSpread2({settings:_ref2.settings},init?{init:init}:{}))});_defineProperty(this,"_update",function(_ref3){_ref3=hydrateSettings(_ref3.settings,_ref3.init);var _loop=function(){var _settings4,_Object$entries$_i=
_slicedToArray(_Object$entries[_i],2),key=_Object$entries$_i[0];_Object$entries$_i=_Object$entries$_i[1];key in _this._settings||Object.defineProperty(_this.s,key,{get:function(){return _this._settings[key]},set:function(newValue){return _this.update({settings:_defineProperty({},key,newValue)})}});_this._settings["".concat(key,":pre")]=_this._settings[key];_this._settings[key]=_Object$entries$_i;_Object$entries$_i={settings:(_settings4={},_defineProperty(_settings4,key,_this._settings[key]),_defineProperty(_settings4,
"".concat(key,":pre"),_this._settings["".concat(key,":pre")]),_settings4)};_this.DS.publish("Settings:updated",_Object$entries$_i);_this.DS.publish("Settings:updated:".concat(key),_Object$entries$_i)},_i=0,_Object$entries=Object.entries(_ref3);for(;_i<_Object$entries.length;_i++)_loop()});this.DS=DS;this.DS.subscribe("Settings:updated:pre",this._update);this.update({settings:_ref,init:!0})}),DragSelect=function(){function DragSelect(_settings){var _this=this;_classCallCheck(this,DragSelect);_defineProperty(this,
"continue",!1);_defineProperty(this,"start",function(){_this.stopped=!1;_this.Interaction.init()});_defineProperty(this,"break",function(){return _this["continue"]=!0});_defineProperty(this,"setSettings",function(settings){return _this.stores.SettingsStore.update({settings:settings})});_defineProperty(this,"getSelection",function(){return _this.SelectedSet.elements});_defineProperty(this,"getSelectables",function(){return _this.SelectableSet.elements});_defineProperty(this,"getInitialCursorPosition",
function(){return _this.stores.PointerStore.initialVal});_defineProperty(this,"getCurrentCursorPosition",function(){return _this.stores.PointerStore.currentVal});_defineProperty(this,"getPreviousCursorPosition",function(){return _this.stores.PointerStore.lastVal});_defineProperty(this,"getInitialCursorPositionArea",function(){return _this.stores.PointerStore.initialValArea});_defineProperty(this,"getCurrentCursorPositionArea",function(){return _this.stores.PointerStore.currentValArea});_defineProperty(this,
"getPreviousCursorPositionArea",function(){return _this.stores.PointerStore.lastValArea});_defineProperty(this,"isMultiSelect",function(event){return _this.stores.KeyStore.isMultiSelectKeyPressed(event)});_defineProperty(this,"isDragging",function(){return _this.Interaction.isDragging});_defineProperty(this,"getZoneByCoordinates",function(coordinates){var _this$DropZones$getTa;return null===(_this$DropZones$getTa=_this.DropZones.getTarget(coordinates))||void 0===_this$DropZones$getTa?void 0:_this$DropZones$getTa.toObject()});
_defineProperty(this,"getItemsDroppedByZoneId",function(zoneId){return _this.DropZones.getItemsDroppedById(zoneId)});_defineProperty(this,"getItemsInsideByZoneId",function(zoneId,addClasses){return _this.DropZones.getItemsInsideById(zoneId,addClasses)});this.PubSub=new PubSub({DS:this});this.subscribe=this.PubSub.subscribe;this.unsubscribe=this.PubSub.unsubscribe;this.publish=this.PubSub.publish;this.stores={};this.stores.SettingsStore=new SettingsStore({DS:this,settings:_settings});this.stores.PointerStore=
new PointerStore({DS:this});this.stores.ScrollStore=new ScrollStore({DS:this});this.stores.KeyStore=new KeyStore({DS:this});this.Area=new Area({DS:this});this.Selector=new Selector({DS:this});this.SelectorArea=new SelectorArea({DS:this});this.SelectableSet=new SelectableSet({DS:this});this.SelectedSet=new SelectedSet({DS:this});this.Selection=new Selection$jscomp$0({DS:this});this.Drag=new Drag({DS:this});this.DropZones=new DropZones({DS:this});this.Interaction=new Interaction({DS:this});subscriberAliases({subscribe:this.subscribe,
publish:this.publish,SelectedSet:this.SelectedSet,Interaction:this.Interaction,DropZones:this.DropZones});this.subscribe("Interaction:end",function(){return _this["continue"]=!1});this.start()}_createClass(DragSelect,[{key:"stop",value:function(){var remove=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0,fromSelection=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0;2<arguments.length&&void 0!==arguments[2]&&arguments[2]&&this.publish("callback",{items:this.getSelection()});this.Interaction.stop();
this.Area.stop();this.Drag.stop();this.Selector.stop();this.SelectorArea.stop(remove);this.stores.KeyStore.stop();this.stores.PointerStore.stop();this.stores.ScrollStore.stop();remove&&this.SelectableSet.clear();fromSelection&&this.SelectedSet.clear();this.stopped=!0}},{key:"addSelection",value:function(elements){var triggerCallback=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1,dontAddToSelectables=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1;this.SelectedSet.addAll(toArray(elements));
dontAddToSelectables||this.addSelectables(elements);triggerCallback&&this.PubSub.publish("callback",{items:this.getSelection()});return this.getSelection()}},{key:"removeSelection",value:function(elements){var triggerCallback=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1,removeFromSelectables=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1;this.SelectedSet.deleteAll(toArray(elements));removeFromSelectables&&this.removeSelectables(elements);triggerCallback&&this.PubSub.publish("callback",
{items:this.getSelection()});return this.getSelection()}},{key:"toggleSelection",value:function(elements){var _this2=this,triggerCallback=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1,removeFromSelectables=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1;toArray(elements).forEach(function(el){return _this2.SelectedSet.has(el)?_this2.removeSelection(elements,triggerCallback,removeFromSelectables):_this2.addSelection(elements,triggerCallback,removeFromSelectables)});triggerCallback&&
this.PubSub.publish("callback",{items:this.getSelection()});return this.getSelection()}},{key:"setSelection",value:function(elements){var triggerCallback=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1,dontAddToSelectables=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1;this.clearSelection();this.addSelection(elements,triggerCallback,dontAddToSelectables);return this.getSelection()}},{key:"clearSelection",value:function(){var triggerCallback=0<arguments.length&&void 0!==arguments[0]?
arguments[0]:!1;this.SelectedSet.clear();triggerCallback&&this.PubSub.publish("callback",{items:this.getSelection()});return this.getSelection()}},{key:"addSelectables",value:function(elements,addToSelection,triggerCallback){var els=toArray(elements);this.SelectableSet.addAll(els);addToSelection&&this.SelectedSet.addAll(els);triggerCallback&&this.PubSub.publish("callback",{items:this.getSelection()});return elements}},{key:"setSelectables",value:function(elements){var removeFromSelection=1<arguments.length&&
void 0!==arguments[1]?arguments[1]:!1,addToSelection=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1;console.warn('[DragSelect] DEPRECATION ".setSelectables" is deprecated and will be removed soon. Please use "ds.setSettings({ selectables: \x3c\x3c new dom elements \x3e\x3e })" instead (see docs)');this.removeSelectables(elements,removeFromSelection);return this.addSelectables(elements,addToSelection)}},{key:"removeSelectables",value:function(elements,removeFromSelection,triggerCallback){this.SelectableSet.deleteAll(toArray(elements));
removeFromSelection&&this.removeSelection(elements);triggerCallback&&this.PubSub.publish("callback",{items:this.getSelection()});return elements}}]);return DragSelect}();DragSelect.isCollision=isCollision;return DragSelect})}
//# sourceMappingURL=module$node_modules$dragselect$dist$DragSelect.js.map
